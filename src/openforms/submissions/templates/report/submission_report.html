{% load static i18n solo_tags style_dictionary %}<!DOCTYPE html>
<html lang="nl">
    <head>
        <meta charset="utf-8">
        <title>{% block title %}{% trans "Summary PDF" %}{% endblock %}</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link href="{% static 'bundles/pdf-css.css' %}" media="all" rel="stylesheet" />
        {% block extra_css %}{% endblock %}

        {# Inject design tokens for theming #}
        {% get_solo 'config.GlobalConfiguration' as config %}
        {% style_dictionary config.design_token_values prefix="of" as design_tokens %}
        {# This goes through WeasyPrint normally, so excluded from CSP #}
        <style>
        :root {{% for token, value in design_tokens.items %}
          {{ token }}: {{ value }};{% endfor %}
        }
        </style>
    </head>

    <body class="A4">

        <section class="sheet padding-10mm">
            <header class="header {% if config.logo %}header--has-logo{% endif %}">
                {% if config.logo %}<img class="header__logo" src="{{ config.logo.url }}" />{% endif %}
            </header>

            <h1 class="title">{{ report.form.name }}</h1>

            <section class="metadata">
                <p>{% blocktrans with submission_date=report.submission.completed_on trimmed %}
                    Submitted on: {{ submission_date }}
                {% endblocktrans %}</p>
                {% comment %}
                Disabled - PDF generation runs before registration, so there is no reference yet.
                See #1424 for the open issue.
                <p>{% blocktrans with ref=report.submission.public_reference trimmed %}
                    Your reference is: {{ ref }}
                {% endblocktrans %}</p>
                {% endcomment %}
            </section>

            {% for submission_step_node in report.renderer.get_children %}
                <div class="submission-step">
                    <h2 class="subtitle">{{ submission_step_node.render }}</h2>
                    {% for component_node in submission_step_node.get_children %}
                        <div class="submission-step-row {% if component_node.layout_modifier %}submission-step-row--{{ component_node.layout_modifier }}{% endif %}">

                            <div class="submission-step-row__label">
                                {{ component_node.label }}
                            </div>

                            <div class="submission-step-row__value">
                                {{ component_node.display_value }}
                            </div>

                        </div>
                    {% endfor %}
                </div>
            {% endfor %}

            {% if report.co_signer %}
            <div class="submission-step-row">
                <div class="submission-step-row__label">{% trans "Co-signed by" %}</div>
                <div class="submission-step-row__value">{{ report.co_signer }}</div>
            </div>
            {% endif %}

            {% if report.show_payment_info %}
            <section class="payment-info">
                <div class="submission-step-row">
                    <div class="submission-step-row__label">
                        {% trans "Total payment required" %}
                    </div>
                    <div class="submission-step-row__value">
                        &euro; {{ report.submission.price }}
                    </div>
                </div>
            </section>
            {% endif %}

            <section>
                {{ report.confirmation_page_content }}
            </section>

        </section>
    </body>
</html>
